<!DOCTYPE html><html lang="en"><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="/live2d-widget/autoload.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/tipuesearch/tipuesearch_content.js"></script><link rel="stylesheet" href="/tipuesearch/tipuesearch.css"><script src="/tipuesearch/tipuesearch_set.js"></script><script src="/tipuesearch/tipuesearch.min.js"></script><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title> | MaoZH</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.11.0/mermaid.min.js"></script><script>mermaid.initialize({
  startOnLoad: true
  , theme: 'dark'
});</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="MaoZH" type="application/atom+xml">
</head><body><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1></h1><hr></div><div id="post-content"><h1 id="1、搭建演示环境"><a href="#1、搭建演示环境" class="headerlink" title="1、搭建演示环境"></a>1、搭建演示环境</h1><h2 id="1-1-创建数据表"><a href="#1-1-创建数据表" class="headerlink" title="1.1 创建数据表"></a>1.1 创建数据表</h2><p>  在mybatis数据库中创建名为“course”的数据表，并在数据表中添加测试数据。建表与插入测试语句的代码如下所示：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for `course`</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `course`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `course` (<br>  `id` <span class="hljs-type">int</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> auto_increment,<br>  `<span class="hljs-keyword">no</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">default</span> <span class="hljs-keyword">NULL</span>,<br>  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">default</span> <span class="hljs-keyword">NULL</span>,<br>  `score` <span class="hljs-type">int</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">default</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY  (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of course</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;C001&#x27;</span>, <span class="hljs-string">&#x27;数据结构&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;C002&#x27;</span>, <span class="hljs-string">&#x27;操作系统&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;C003&#x27;</span>, <span class="hljs-string">&#x27;计算机网络&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;C004&#x27;</span>, <span class="hljs-string">&#x27;计算机组成原理&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;5&#x27;</span>, <span class="hljs-string">&#x27;C005&#x27;</span>, <span class="hljs-string">&#x27;算法设计与分析&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;6&#x27;</span>, <span class="hljs-string">&#x27;C006&#x27;</span>, <span class="hljs-string">&#x27;C语言程序设计&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;7&#x27;</span>, <span class="hljs-string">&#x27;C007&#x27;</span>, <span class="hljs-string">&#x27;数据挖掘&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;8&#x27;</span>, <span class="hljs-string">&#x27;C008&#x27;</span>, <span class="hljs-string">&#x27;机器学习&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;9&#x27;</span>, <span class="hljs-string">&#x27;C009&#x27;</span>, <span class="hljs-string">&#x27;Linus操作系统&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `course` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;10&#x27;</span>, <span class="hljs-string">&#x27;C010&#x27;</span>, <span class="hljs-string">&#x27;Java程序语言设计&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><span class="hljs-number">123456789101112131415161718192021222324252627</span><br></code></pre></td></tr></table></figure>

<p>  创建完毕后的数据表如下所示：<br><img src="https://img-blog.csdnimg.cn/20190107103615859.png" alt="在这里插入图片描述"></p>
<h2 id="1-2-创建实体类"><a href="#1-2-创建实体类" class="headerlink" title="1.2 创建实体类"></a>1.2 创建实体类</h2><p>  在com.ccff.mybatis.model包下创建名为“Course”的实体类，并为成员变量提供get和set方法以及toString方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.model;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Course</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String no;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> score;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getNo</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> no;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setNo</span><span class="hljs-params">(String no)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.no = no;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getScore</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setScore</span><span class="hljs-params">(<span class="hljs-keyword">int</span> score)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Course&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, no=&#x27;&quot;</span> + no + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, score=&quot;</span> + score +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-number">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950</span><br></code></pre></td></tr></table></figure>

<h2 id="1-3-创建接口Dao"><a href="#1-3-创建接口Dao" class="headerlink" title="1.3 创建接口Dao"></a>1.3 创建接口Dao</h2><p>  在com.ccff.mybatis.dao包下创建名为“ICourseDao”的空的接口Dao文件，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.dao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICourseDao</span> </span>&#123;<br>&#125;<br><span class="hljs-number">1234</span><br></code></pre></td></tr></table></figure>

<h2 id="1-4-创建SQL映射文件"><a href="#1-4-创建SQL映射文件" class="headerlink" title="1.4 创建SQL映射文件"></a>1.4 创建SQL映射文件</h2><p>  在config/sqlmap文件夹下创建名为“CourseMapper.xml”的空的SQL映射文件，具体代码如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.ccff.mybatis.dao.ICourseDao&quot;</span> &gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>123456<br></code></pre></td></tr></table></figure>

<p>  创建SQL映射文件完毕后，将该SQL映射文件配置到全局配置文件中的mapper加载路径中，具体配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置SQL映射文件的位置--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/UserMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/StudentMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/BasketballPlayerMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/FinacialMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/NewsLabelMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/LazyLoadingMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/BookMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/GoodsMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/GamePlayerMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/CourseMapper.xml&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br>12345678910111213<br></code></pre></td></tr></table></figure>

<h2 id="1-5-创建测试类"><a href="#1-5-创建测试类" class="headerlink" title="1.5 创建测试类"></a>1.5 创建测试类</h2><p>  在com.ccff.mybatis.test包下创建名为“CourseTest”的测试类，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.test;<br><br><span class="hljs-keyword">import</span> com.ccff.mybatis.dao.ICourseDao;<br><span class="hljs-keyword">import</span> com.ccff.mybatis.datasource.DataConnection;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.junit.After;<br><span class="hljs-keyword">import</span> org.junit.Before;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CourseTest</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> SqlSession sqlSession;<br>    <span class="hljs-keyword">private</span> ICourseDao courseDao;<br><br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>        DataConnection dataConnection = <span class="hljs-keyword">new</span> DataConnection();<br>        <span class="hljs-keyword">try</span> &#123;<br>            sqlSession = dataConnection.getSqlSession();<br>            courseDao = sqlSession.getMapper(ICourseDao.class);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@After</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-keyword">null</span>)<br>            sqlSession.close();<br>    &#125;<br>&#125;<br><span class="hljs-number">12345678910111213141516171819202122232425262728293031</span><br></code></pre></td></tr></table></figure>

<h1 id="2、通过List结果集实现分页"><a href="#2、通过List结果集实现分页" class="headerlink" title="2、通过List结果集实现分页"></a>2、通过List结果集实现分页</h1><p>  通过List结果集实现分页的原理是：将需要分页处理的数据先从数据库中全部取出，然后在List结果集中截取需要的部分。</p>
<h2 id="2-1-添加接口方法"><a href="#2-1-添加接口方法" class="headerlink" title="2.1 添加接口方法"></a>2.1 添加接口方法</h2><p>  在ICourseDao接口文件中创建名为“getPageCourseByList”的方法，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.dao;<br><br><span class="hljs-keyword">import</span> com.ccff.mybatis.model.Course;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICourseDao</span> </span>&#123;<br>    <span class="hljs-comment">//通过List结果集实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByList</span><span class="hljs-params">()</span></span>;<br>&#125;<br><span class="hljs-number">12345678910</span><br></code></pre></td></tr></table></figure>

<h2 id="2-2-添加SQL标签"><a href="#2-2-添加SQL标签" class="headerlink" title="2.2 添加SQL标签"></a>2.2 添加SQL标签</h2><p>  在CourseMapper.xml中添加select标签，具体代码如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.ccff.mybatis.dao.ICourseDao&quot;</span> &gt;</span><br>    <span class="hljs-comment">&lt;!--通过List结果集实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>12345678910<br></code></pre></td></tr></table></figure>

<h2 id="2-3-添加测试方法"><a href="#2-3-添加测试方法" class="headerlink" title="2.3 添加测试方法"></a>2.3 添加测试方法</h2><p>  在CourseTest测试类中首先创建名为“pageByList”的分页方法，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**	</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> currPage：当前页号</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> pageSize：当前页总共的记录数</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> 该页的记录的List集合</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;Course&gt; <span class="hljs-title">pageByList</span><span class="hljs-params">(<span class="hljs-keyword">int</span> currPage, <span class="hljs-keyword">int</span> pageSize)</span></span>&#123;<br>	<span class="hljs-comment">//查询全部数据</span><br>    List&lt;Course&gt; courses = courseDao.getPageCourseByList();<br>    <span class="hljs-comment">//从第几条数据开始</span><br>    <span class="hljs-keyword">int</span> firstIndex = (currPage-<span class="hljs-number">1</span>)*pageSize;<br>    <span class="hljs-comment">//到第几条结束</span><br>    <span class="hljs-keyword">int</span> lastIndex = currPage*pageSize;<br>    <span class="hljs-comment">//直接在List中截取</span><br>    <span class="hljs-keyword">return</span> courses.subList(firstIndex,lastIndex);<br>&#125;<br><span class="hljs-number">123456789101112131415</span><br></code></pre></td></tr></table></figure>

<p>  然后在CourseTest测试类中创建名为“TestGetPageCourseByList”的测试方法测试该分页方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TestGetPageCourseByList</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//总记录共10条。假设总共分为4页，每页最多3条记录</span><br>    System.out.println(<span class="hljs-string">&quot;===========================第二页记录为：=====================&quot;</span>);<br>    List&lt;Course&gt; secondPage = pageByList(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br>    <span class="hljs-keyword">for</span> (Course course : secondPage)&#123;<br>        System.out.println(course);<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;===========================第四页记录为：=====================&quot;</span>);<br>    List&lt;Course&gt; lastPage = pageByList(<span class="hljs-number">4</span>,<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (Course course : lastPage)&#123;<br>        System.out.println(course);<br>    &#125;<br>&#125;<br><span class="hljs-number">1234567891011121314</span><br></code></pre></td></tr></table></figure>

<p>  最后，运行该测试方法后，查看控制台输出的日志信息如下，说明分页成功！<br><img src="https://img-blog.csdnimg.cn/20190107155043655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNjM3ODkxNw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="3、通过SQL参数实现分页"><a href="#3、通过SQL参数实现分页" class="headerlink" title="3、通过SQL参数实现分页"></a>3、通过SQL参数实现分页</h1><p>  通过SQL参数实现分页的原理为：通过SQL语句中的limit关键字实现分页查询。limit关键字所需要的参数则由方法通过参数传递的方式给出。</p>
<h2 id="3-1-添加接口方法"><a href="#3-1-添加接口方法" class="headerlink" title="3.1 添加接口方法"></a>3.1 添加接口方法</h2><p>  在ICourseDao接口文件中创建名为“getPageCourseBySQL”的方法，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.dao;<br><br><span class="hljs-keyword">import</span> com.ccff.mybatis.model.Course;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICourseDao</span> </span>&#123;<br>    <span class="hljs-comment">//通过List结果集实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByList</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">//通过SQL参数实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseBySQL</span><span class="hljs-params">(Map&lt;String,Object&gt; data)</span></span>;<br>&#125;<br><span class="hljs-number">1234567891011121314</span><br></code></pre></td></tr></table></figure>

<h2 id="3-2-添加SQL标签"><a href="#3-2-添加SQL标签" class="headerlink" title="3.2 添加SQL标签"></a>3.2 添加SQL标签</h2><p>  在CourseMapper.xml中添加select标签，具体代码如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.ccff.mybatis.dao.ICourseDao&quot;</span> &gt;</span><br>    <span class="hljs-comment">&lt;!--通过List结果集实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过SQL参数实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseBySQL&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course limit #&#123;currIndex&#125; , #&#123;pageSize&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>123456789101112131415<br></code></pre></td></tr></table></figure>

<h2 id="3-3-添加测试方法"><a href="#3-3-添加测试方法" class="headerlink" title="3.3 添加测试方法"></a>3.3 添加测试方法</h2><p>  然后在CourseTest测试类中创建名为“TestGetPageCourseBySQL”的测试方法测试该分页方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TestGetPageCourseBySQL</span><span class="hljs-params">()</span></span>&#123;<br>    Map&lt;String,Object&gt; data = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    data.put(<span class="hljs-string">&quot;currIndex&quot;</span>,<span class="hljs-number">3</span>);<br>    data.put(<span class="hljs-string">&quot;pageSize&quot;</span>,<span class="hljs-number">3</span>);<br>    List&lt;Course&gt; thirdPage = courseDao.getPageCourseBySQL(data);<br>    System.out.println(<span class="hljs-string">&quot;===========================第三页记录为：=====================&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Course course : thirdPage)&#123;<br>        System.out.println(course);<br>    &#125;<br>&#125;<br><span class="hljs-number">1234567891011</span><br></code></pre></td></tr></table></figure>

<p>  运行该测试方法后，查看控制台输出的日志信息如下，说明分页成功！<br><img src="https://img-blog.csdnimg.cn/20190107160519679.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNjM3ODkxNw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="4、通过RowBounds实现分页"><a href="#4、通过RowBounds实现分页" class="headerlink" title="4、通过RowBounds实现分页"></a>4、通过RowBounds实现分页</h1><p>  MyBatis框架本身已经对分页进行了一定程度的支持，它内置了一个专门处理分页的类——RowBounds。其源码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.apache.ibatis.session;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RowBounds</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NO_ROW_OFFSET = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NO_ROW_LIMIT = <span class="hljs-number">2147483647</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> RowBounds DEFAULT = <span class="hljs-keyword">new</span> RowBounds();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> offset;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> limit;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RowBounds</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.offset = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">this</span>.limit = <span class="hljs-number">2147483647</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RowBounds</span><span class="hljs-params">(<span class="hljs-keyword">int</span> offset, <span class="hljs-keyword">int</span> limit)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.offset = offset;<br>        <span class="hljs-keyword">this</span>.limit = limit;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getOffset</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.offset;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getLimit</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.limit;<br>    &#125;<br>&#125;<br><span class="hljs-number">123456789101112131415161718192021222324252627</span><br></code></pre></td></tr></table></figure>

<p>  其中，offset属性时偏移量，即从第几行开始读取记录。limit是限制条数，从源码可知，默认值为0和Java的最大整数（2 147 483 647），使用它十分简单，只要给接口增加一个RowBounds参数即可。</p>
<h2 id="4-1-添加接口方法"><a href="#4-1-添加接口方法" class="headerlink" title="4.1 添加接口方法"></a>4.1 添加接口方法</h2><p>  在ICourseDao接口文件中创建名为“getPageCourseByRowBounds”的方法，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.dao;<br><br><span class="hljs-keyword">import</span> com.ccff.mybatis.model.Course;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.RowBounds;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICourseDao</span> </span>&#123;<br>    <span class="hljs-comment">//通过List结果集实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByList</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">//通过SQL参数实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseBySQL</span><span class="hljs-params">(Map&lt;String,Object&gt; data)</span></span>;<br><br>    <span class="hljs-comment">//通过RowBounds实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByRowBounds</span><span class="hljs-params">(RowBounds rowBounds)</span></span>;<br>&#125;<br><span class="hljs-number">123456789101112131415161718</span><br></code></pre></td></tr></table></figure>

<h2 id="4-2-添加SQL标签"><a href="#4-2-添加SQL标签" class="headerlink" title="4.2 添加SQL标签"></a>4.2 添加SQL标签</h2><p>  在CourseMapper.xml中添加select标签，具体代码如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.ccff.mybatis.dao.ICourseDao&quot;</span> &gt;</span><br>    <span class="hljs-comment">&lt;!--通过List结果集实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过SQL参数实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseBySQL&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course limit #&#123;currIndex&#125; , #&#123;pageSize&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过RowBounds实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByRowBounds&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>1234567891011121314151617181920<br></code></pre></td></tr></table></figure>

<p>  在上面的select标签中，并没有任何关于RowBounds参数的信息。因为它是MyBatis的一个附加参数，MyBatis会自动识别它，据此分页。</p>
<h2 id="4-3-添加测试方法"><a href="#4-3-添加测试方法" class="headerlink" title="4.3 添加测试方法"></a>4.3 添加测试方法</h2><p>  然后在CourseTest测试类中创建名为“TestGetPageCourseByRowBounds”的测试方法测试该分页方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TestGetPageCourseByRowBounds</span><span class="hljs-params">()</span></span>&#123;<br>    RowBounds rowBounds = <span class="hljs-keyword">new</span> RowBounds(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);<br>    List&lt;Course&gt; firstPage = courseDao.getPageCourseByRowBounds(rowBounds);<br>    System.out.println(<span class="hljs-string">&quot;===========================第一页记录为：=====================&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Course course : firstPage)&#123;<br>        System.out.println(course);<br>    &#125;<br>&#125;<br><span class="hljs-number">123456789</span><br></code></pre></td></tr></table></figure>

<p>  运行该测试方法后，查看控制台输出的日志信息如下，说明分页成功！<br><img src="https://img-blog.csdnimg.cn/20190107161730543.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNjM3ODkxNw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>  这里需要注意RowBounds分页应用的场景，它只能应用于一些小数据量的查询。RowBounds分页的原理是执行SQL的查询后，按照偏移量和限制条数返回查询结果（即MyBatis对第一小节介绍的方法的一种实现，无需再重复造轮子），所以对于大数据量的数据查询，它的性能并不佳。此时可以通过分页插件去处理，详情参考下一小节。</p>
<h1 id="5、通过插件实现分页"><a href="#5、通过插件实现分页" class="headerlink" title="5、通过插件实现分页"></a>5、通过插件实现分页</h1><p>  关于MyBatis中插件的介绍在本系列博客的第十篇<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36378917/article/details/85246242">《MyBatis使用篇（十）—— MyBatis配置文件详解》</a>中已经有了介绍。</p>
<p>  为了不重复造轮子，这里使用了PageHelper分页插件。PageHelper分页插件已经在GitHub上开源，<a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">PageHelper的GitHub地址</a>。</p>
<h2 id="5-1-添加依赖jar包"><a href="#5-1-添加依赖jar包" class="headerlink" title="5.1 添加依赖jar包"></a>5.1 添加依赖jar包</h2><p>  为了正确使用PageHelper分页插件，首先需要在WEB-INF/lib下导入其依赖的两个jar包：pagehelper-5.1.8.jar和jsqlparser-0.9.5.jar，并将其Add As Library。<br><img src="https://img-blog.csdnimg.cn/20190108131826332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNjM3ODkxNw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5-2-配置分页插件"><a href="#5-2-配置分页插件" class="headerlink" title="5.2 配置分页插件"></a>5.2 配置分页插件</h2><p>  想要在项目中使用PageHelper插件，则需要在全局配置文件中进行配置，具体配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--注册DB连接四要素的属性文件--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;jdbc.properties&quot;</span> /&gt;</span><br><br>    <span class="hljs-comment">&lt;!--全局参数设置--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 配置LOG信息 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;LOG4J&quot;</span> /&gt;</span><br>        <span class="hljs-comment">&lt;!-- 延迟加载总开关 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lazyLoadingEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- 侵入式延迟加载开关 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;aggressiveLazyLoading&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- 关闭二级查询缓存 --&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;setting name=&quot;cacheEnabled&quot; value=&quot;false&quot; /&gt;--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--配置别名--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;typeAlias type=&quot;com.ccff.mybatis.model.User&quot; alias=&quot;User&quot;/&gt;--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.ccff.mybatis.model&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--配置自定义对象工厂--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">objectFactory</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.ccff.mybatis.objectFactory.CartObjectFactory&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--配置分页插件--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 和spring整合后 environments配置将废除--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 使用jdbc事务管理--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span> /&gt;</span><br>            <span class="hljs-comment">&lt;!-- 数据库连接池--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--配置SQL映射文件的位置--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/UserMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/StudentMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/BasketballPlayerMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/FinacialMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/NewsLabelMapper.xml&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/LazyLoadingMapper.xml&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/BookMapper.xml&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/GoodsMapper.xml&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/GamePlayerMapper.xml&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;sqlmap/CourseMapper.xml&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263<br></code></pre></td></tr></table></figure>

<p>  这里需要注意一个细节问题，就是关于PageHelper分页插件的版本的选择问题。本博客采用的是当前最新版本5.1.8。当使用4.x版本时，关于PageHelper插件的配置稍有不同，具体修改配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 配置分页插件 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 设置数据库类型 Oracle,Mysql,MariaDB,SQLite,Hsqldb,PostgreSQL六种数据库--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;helperDialect&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mysql&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>1234567<br></code></pre></td></tr></table></figure>

<p>  如果使用5.x版本和如上配置则会报错，具体原理请参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zx947240023/p/8150923.html">《使用MyBatis分页插件PageHelper遇到的问题》</a></p>
<h2 id="5-3-添加接口方法"><a href="#5-3-添加接口方法" class="headerlink" title="5.3 添加接口方法"></a>5.3 添加接口方法</h2><p>  在ICourseDao接口文件中创建名为“getPageCorseByPagePlugin”的方法，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ccff.mybatis.dao;<br><br><span class="hljs-keyword">import</span> com.ccff.mybatis.model.Course;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.RowBounds;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICourseDao</span> </span>&#123;<br>    <span class="hljs-comment">//通过List结果集实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByList</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">//通过SQL参数实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseBySQL</span><span class="hljs-params">(Map&lt;String,Object&gt; data)</span></span>;<br><br>    <span class="hljs-comment">//通过RowBounds实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCourseByRowBounds</span><span class="hljs-params">(RowBounds rowBounds)</span></span>;<br><br>    <span class="hljs-comment">//通过分页插件实现分页</span><br>    <span class="hljs-function">List&lt;Course&gt; <span class="hljs-title">getPageCorseByPagePlugin</span><span class="hljs-params">()</span></span>;<br>&#125;<br><span class="hljs-number">123456789101112131415161718192021</span><br></code></pre></td></tr></table></figure>

<h2 id="5-4-添加SQL标签"><a href="#5-4-添加SQL标签" class="headerlink" title="5.4 添加SQL标签"></a>5.4 添加SQL标签</h2><p>  在CourseMapper.xml中添加select标签，具体代码如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.ccff.mybatis.dao.ICourseDao&quot;</span> &gt;</span><br>    <span class="hljs-comment">&lt;!--通过List结果集实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过SQL参数实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseBySQL&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course limit #&#123;currIndex&#125; , #&#123;pageSize&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过RowBounds实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCourseByRowBounds&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过分页插件实现分页--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getPageCorseByPagePlugin&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Course&quot;</span>&gt;</span><br>        select * from course<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>12345678910111213141516171819202122232425<br></code></pre></td></tr></table></figure>

<h2 id="5-5-添加测试方法"><a href="#5-5-添加测试方法" class="headerlink" title="5.5 添加测试方法"></a>5.5 添加测试方法</h2><p>  然后在CourseTest测试类中创建名为“TestGetPageCorseByPagePlugin”的测试方法测试该分页方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TestGetPageCorseByPagePlugin</span><span class="hljs-params">()</span></span>&#123;<br>    PageHelper.startPage(<span class="hljs-number">4</span>,<span class="hljs-number">3</span>);<br>    List&lt;Course&gt; ForthPage = courseDao.getPageCorseByPagePlugin();<br>    System.out.println(<span class="hljs-string">&quot;===========================第四页记录为：=====================&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Course course : ForthPage)&#123;<br>        System.out.println(course);<br>    &#125;<br>&#125;<br><span class="hljs-number">123456789</span><br></code></pre></td></tr></table></figure>

<p>  运行该测试方法后，查看控制台输出的日志信息如下，说明分页成功！<br><img src="https://img-blog.csdnimg.cn/20190108132138521.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNjM3ODkxNw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>  这里仅对PageHelper分页插件做了一个很简单的使用，如果感兴趣可自行查阅相关资料。<br><a target="_blank" rel="noopener" href="https://www.imooc.com/article/33462">《（血和泪的成果）使用PageHelper分页插件进行后台分页》</a><br><a target="_blank" rel="noopener" href="https://www.imooc.com/article/14124">《Mybatis 的分页插件PageHelper-4.1.1的使用》</a></p>
<div id="paginator"></div></div><p><strong>本文标题</strong>：<br><strong>本文作者</strong>：MaoZH<br><strong>本文链接</strong>：<a href="/2021/11/21/mybatis11/">https://jack-edward.github.io/2021/11/21/mybatis11/</a><br><strong>版权声明</strong>：转载或借鉴请注明出处，保留以上声明信息！</p><div class="post_share"><div class="social-share share-component" data-image="https://cdn.jsdelivr.net/gh/hassanblog/CDN/img/cover_character_drawing.png" data-sites="facebook,twitter,wechat,weibo,qq,qzone,tencent,douban,diandian,google,linkedin"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="all" onload="this.media=&quot;all&quot;"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer=""></script></div><div id="post-footer"><hr><a href="/2021/11/21/spring%E9%9B%86%E6%88%90mybatis/">spring集成mybatis Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: 'TWFe26C7GQDWyvw3lVpQUswj-gzGzoHsz'
 , appKey: 'kA8WG8bPJQ16UwOnhf7TGdHn'
 , placeholder: '欢迎大家评论，感谢批评指正'
})</script></div></article><aside><form><div class="tipue_search_group"><input id="tipue_search_input" type="text" name="q" placeholder="Search Here" pattern=".{3,}" title="At least 3 characters" autofocus="autofocus" required=""><button class="tipue_search_button" type="submit"><div class="tipue_search_icon">⚲</div></button></div></form><div id="tipue_search_content"></div><script>$(document).ready(function() {
$('#tipue_search_input').tipuesearch();
});</script><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><div id="he-plugin-standard"></div><script>WIDGET = {
"CONFIG": {
"layout": "1",
"width": 450,
"height": 150,
"background": "3",
"dataColor": "FFFFFF",
"key": "e2043117ad6d459bb0eb89b26de1b4a2"
}
}</script><script src="https://widget.qweather.net/standard/static/js/he-standard-common.js?v=2.0"></script><h1 id="dr"><a href="/"> Mr.MaoZH</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">9</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">9</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">5</span></div></section></div><div id="about-me"><span class="about-me">Contact-me:</span><a href="tencent://message/?uin=3128633651&amp;amp;site=qq&amp;amp;menu=yes"><img src="https://im.qq.com/favicon.ico"></a><a href="mailto:3128633651@qq.com"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/social/email.svg" width="20"></a></div><div id="aside-block"><div id="aside"></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">2020 to 2021</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><wbr><wbr><nobr>published with&nbsp;<a href="https://jack-edward.github.io">Zhihui Mao&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a href="">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a href="">Yue_plus </a></nobr><wbr><script type="text/javascript" src="jquery.min.js"></script><script type="text/javascript">$(document).ready(function(){
//通过调用新浪IP地址库接口查询用户当前所在国家、省份、城市、运营商信息
$.getScript('https://pv.sohu.com/cityjson?ie=utf-8',function(){
$(".city").html(returnCitySN.cname);
$(".ip").html(returnCitySN.cip);
//$(".browser").html(navigator.appVersion);
});
});</script></footer><div>欢迎来自<span class="city"></span>地区的朋友<br>您的IP地址为：<span class="ip"></span><!--| <br>您的浏览器为：--><!--span.browser--><wbr><script type="text/javascript" src="//rf.revolvermaps.com/0/0/1.js?i=52al2pyccg1&amp;s=216&amp;m=0&amp;v=true&amp;r=false&amp;b=000000&amp;n=false&amp;c=ff0000" async="async"></script><wbr><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=406086764&auto=0&height=66"></iframe></div></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>